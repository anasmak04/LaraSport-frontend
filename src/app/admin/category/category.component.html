<div>
  <app-header></app-header>
  <div class="flex overflow-hidden bg-white pt-16 min-h-screen">
    <app-sidebar></app-sidebar>
    <div
      class="bg-gray-900 opacity-50 hidden fixed inset-0 z-10"
      id="sidebarBackdrop"
    ></div>
    <div
      id="main-content"
      class="w-full bg-gray-50 relative overflow-y-auto lg:ml-64"
    >
      <main>
        <div class="container mx-auto w-full p-8">
          <button
            (click)="toggleModal()"
            class="block mb-10 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
            type="button"
          >
            Add New Category
          </button>

          <div
            id="static-modal"
            aria-hidden="true"
            [class.hidden]="!showModal"
            class="overflow-y-auto bg-black bg-opacity-85 overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"
          >
            <div class="relative p-4 w-full max-w-2xl max-h-full">
              <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                <form
                  [formGroup]="categoryForm"
                  (ngSubmit)="add()"
                  enctype="multipart/form-data"
                >
                  <div class="mb-6 space-y-4 p-8">
                    <h1 class="capitalize text-xl font-bold">add new city</h1>
                    <label
                      for="first_name"
                      class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                      >Name</label
                    >
                    <input
                      formControlName="name"
                      type="text"
                      id="name"
                      id="first_name"
                      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                      placeholder="Name"
                      required
                    />

                    @if ( categoryForm.controls['name'].invalid &&
                    categoryForm.controls['name'].touched) {
                    <span>name is required</span>
                    }

                    <label
                      for="first_name"
                      class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                      >Description</label
                    >
                    <input
                      formControlName="description"
                      type="text"
                      id="description"
                      id="description"
                      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                      placeholder="Description"
                      required
                    />
                  </div>
                </form>
                <!-- Modal footer -->

                <div
                  class="flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"
                >
                  <button
                    type="submit"
                    (click)="add()"
                    [disabled]="!categoryForm.valid"
                    class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
                  >
                    Save
                  </button>
                  <button
                    (click)="toggleModal()"
                    data-modal-hide="static-modal"
                    type="button"
                    class="py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"
                  >
                    Cancel
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div
            *ngIf="loader.isLoading | async"
            class="relative z-0 overflow-x-auto shadow-md sm:rounded-lg"
          >
            <table
              class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"
            >
              <caption
                class="p-5 text-lg font-semibold text-left rtl:text-right text-gray-900 bg-white"
              >
                Category Management
                <p
                  class="mt-1 text-sm font-normal text-gray-500 dark:text-gray-400"
                >
                  Browse, add, or modify categories within the system. This
                  table provides an overview of all cities currently managed,
                  including options to edit or delete each entry as needed.
                </p>
              </caption>
              <thead
                class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
              >
                <tr>
                  <th scope="col" class="px-6 py-3">Id</th>
                  <th scope="col" class="px-6 py-3">Name</th>
                  <th scope="col" class="px-6 py-3">Description</th>
                  <th scope="col" class="px-6 py-3 text-center">Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr class="bg-white border-b animate-pulse">
                  <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded dark:bg-gray-700"></div>
                  </td>

                  <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded dark:bg-gray-700"></div>
                  </td>

                  <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded dark:bg-gray-700"></div>
                  </td>

                  <td class="px-6 py-4">
                    <div
                      class="h-4 bg-gray-200 rounded dark:bg-gray-700 w-3/4"
                    ></div>
                  </td>
                </tr>
                <tr class="bg-white border-b animate-pulse">
                  <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded dark:bg-gray-700"></div>
                  </td>

                  <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded dark:bg-gray-700"></div>
                  </td>

                  <td class="px-6 py-4">
                    <div
                      class="h-4 bg-gray-200 rounded dark:bg-gray-700 w-3/4"
                    ></div>
                  </td>
                  <td class="px-6 py-4 text-center">
                    <div
                      class="h-4 bg-gray-200 rounded dark:bg-gray-700 w-1/2 mx-auto"
                    ></div>
                  </td>
                </tr>
                <tr class="bg-white border-b animate-pulse">
                  <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded dark:bg-gray-700"></div>
                  </td>

                  <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded dark:bg-gray-700"></div>
                  </td>

                  <td class="px-6 py-4">
                    <div
                      class="h-4 bg-gray-200 rounded dark:bg-gray-700 w-3/4"
                    ></div>
                  </td>
                  <td class="px-6 py-4 text-center">
                    <div
                      class="h-4 bg-gray-200 rounded dark:bg-gray-700 w-1/2 mx-auto"
                    ></div>
                  </td>
                </tr>
                <tr class="bg-white border-b animate-pulse">
                  <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded dark:bg-gray-700"></div>
                  </td>
                  <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded dark:bg-gray-700"></div>
                  </td>
                  <td class="px-6 py-4">
                    <div
                      class="h-4 bg-gray-200 rounded dark:bg-gray-700 w-3/4"
                    ></div>
                  </td>
                  <td class="px-6 py-4 text-center">
                    <div
                      class="h-4 bg-gray-200 rounded dark:bg-gray-700 w-1/2 mx-auto"
                    ></div>
                  </td>
                </tr>
                <tr class="bg-white border-b animate-pulse">
                  <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded dark:bg-gray-700"></div>
                  </td>
                  <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded dark:bg-gray-700"></div>
                  </td>
                  <td class="px-6 py-4">
                    <div
                      class="h-4 bg-gray-200 rounded dark:bg-gray-700 w-3/4"
                    ></div>
                  </td>
                  <td class="px-6 py-4 text-center">
                    <div
                      class="h-4 bg-gray-200 rounded dark:bg-gray-700 w-1/2 mx-auto"
                    ></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div
            *ngIf="!(loader.isLoading | async)"
            class="relative z-0 overflow-x-auto shadow-md sm:rounded-lg"
          >
            <table
              class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"
            >
              <caption
                class="p-5 text-lg font-semibold text-left rtl:text-right text-gray-900 bg-white"
              >
                Category Management
                <p
                  class="mt-1 text-sm font-normal text-gray-500 dark:text-gray-400"
                >
                  Browse, add, or modify categories within the system. This
                  table provides an overview of all cities currently managed,
                  including options to edit or delete each entry as needed.
                </p>
              </caption>

              <thead
                class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
              >
                <tr>
                  <th scope="col" class="px-6 py-3">Id</th>
                  <th scope="col" class="px-6 py-3">Name</th>
                  <th scope="col" class="px-6 py-3">Description</th>
                  <th scope="col" class="px-6 py-3 text-center">Actions</th>
                </tr>
              </thead>

              <tbody *ngFor="let category of categories">
                <tr class="bg-white border-b">
                  <th
                    scope="row"
                    class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"
                  >
                    {{ category.id }}
                  </th>

                  <td class="px-6 py-4">
                    {{ category.name }}
                  </td>

                  <td class="px-6 py-4">
                    {{ category.description }}
                  </td>

                  <td class="px-6 py-4 text-center">
                    <button
                      type="button"
                      (click)="delete(category.id)"
                      class="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900"
                    >
                      Delete
                    </button>

                    <button
                      type="button"
                      (click)="findbyid(category.id)"
                      class="focus:outline-none text-white bg-yellow-400 hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:focus:ring-yellow-900"
                    >
                      Edit
                    </button>

                  </td>
                </tr>
              </tbody>
            </table>

            <div
              *ngIf="showModalUpdate"
              class="fixed inset-0 bg-opacity-25 flex items-center justify-center"
            >
              <div class="modal-content bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold mb-4">Edit Category</h3>
                <form [formGroup]="categoryForm" class="space-y-4">
                  <div>
                    <label
                      for="name"
                      class="block text-sm font-medium text-gray-700"
                      >Name:</label
                    >
                    <input
                      type="text"
                      id="name"
                      formControlName="name"
                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                    />
                  </div>
                  <div>
                    <label
                      for="description"
                      class="block text-sm font-medium text-gray-700"
                      >Description:</label
                    >
                    <input
                      type="text"
                      id="description"
                      formControlName="description"
                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                    />
                  </div>
                  <div class="flex justify-end space-x-4">
                    <button
                      type="button"
                      (click)="update()"
                      class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50"
                    >
                      Update Category
                    </button>
                    <button
                      type="button"
                      (click)="toggleModalUpdate()"
                      class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50"
                    >
                      Cancel
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>
</div>
